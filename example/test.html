<p>
	filename: <input type="text" id="filename" value="testme">
</p>
<form id="editfileform" method="post" action="/post/testme">
	<input type="hidden" name="filename" value="testme">
	<input type="button" name="save" value="Save">
	&nbsp;&nbsp;<input type="submit"><br>
	<textarea name="data" cols="80" rows="40">hey u there oh yarp</textarea><br>
	<input type="button" name="save" value="Save">
	&nbsp;&nbsp;<input type="submit">
</form>
<script>
  var eff = document.getElementById("editfileform")
	document.getElementById("filename").addEventListener("blur", function (evt) {
		eff.action="/post/" + evt.target.value; 
		eff.filename.value=evt.target.value
	}); 
	Array.prototype.forEach.call(
		document.querySelectorAll(
			"#editfileform input[type=button][name=save]"
		), function (save) {
			save.addEventListener("click", function (evt) {
        var xhr = new XMLHttpRequest(); 
        xhr.open("POST", evt.target.parentNode.action, true); 
        xhr.onload = function () { console.log(xhr.responseText); }
        xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
        xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        xhr.send("filename=" + evt.target.parentNode.filename.value + "&data=" + evt.target.parentNode.data.value);
			})
		}
	)
</script>
